"use strict";const e=require("../../taro.js"),t=require("../../vendors.js"),s=require("../../common.js"),i="",o=[{id:"promo-001",title:"\u665a\u5b89\u597d\u7720\u5957\u9910",subtitle:"\u6df1\u5ea6\u653e\u677e\uff0c\u4e00\u591c\u597d\u7720",originalPrice:398,discountPrice:298,discount:"7.5\u6298",image:s.bannerGoodnight,validUntil:"2024-12-31",remainingQuota:86,totalQuota:200,description:["60\u5206\u949f\u4e13\u4e1a\u63a8\u62ff\u670d\u52a1","\u9488\u5bf9\u6027\u7761\u7720\u6539\u5584\u65b9\u6848","\u8d60\u9001\u9999\u85b0\u7cbe\u6cb9\u4e00\u4efd","\u53ef\u9009\u65f6\u6bb5\uff1a\u665a7\u70b9-10\u70b9"]},{id:"promo-002",title:"\u80a9\u9888\u7406\u7597\u5957\u9910",subtitle:"\u544a\u522b\u80a9\u9888\u75bc\u75db",originalPrice:298,discountPrice:198,discount:"6.6\u6298",image:s.bannerGoodnight,validUntil:"2024-12-31",remainingQuota:142,totalQuota:300,description:["45\u5206\u949f\u4e13\u4e1a\u80a9\u9888\u63a8\u62ff","\u70ed\u6577\u7406\u7597\u670d\u52a1","\u4e13\u4e1a\u63a8\u62ff\u5e08\u4e00\u5bf9\u4e00\u670d\u52a1","\u9002\u7528\u6240\u6709\u95e8\u5e97"]},{id:"promo-003",title:"\u65b0\u5ba2\u4e13\u4eab\u5957\u9910",subtitle:"\u9996\u6b21\u4f53\u9a8c\u4f18\u60e0",originalPrice:198,discountPrice:99,discount:"5\u6298",image:s.bannerGoodnight,validUntil:"2024-12-31",remainingQuota:58,totalQuota:100,description:["30\u5206\u949f\u57fa\u7840\u63a8\u62ff\u670d\u52a1","\u4e13\u4e1a\u4f53\u8d28\u8bc4\u4f30\u4e00\u6b21","\u4ec5\u9650\u65b0\u7528\u6237\u8d2d\u4e70","\u6bcf\u4eba\u9650\u8d2d\u4e00\u6b21"]}],r=()=>{const[s,i]=e.reactExports.useState(0),[r,n]=e.reactExports.useState([]),[a,c]=e.reactExports.useState(!0);e.reactExports.useEffect(()=>{setTimeout(()=>{n(o),c(!1)},500)},[]);const l=t=>{e.Taro.navigateTo({url:`/pages/booking/confirm/index?type=promotion&id=${t.id}`})},x=[{title:"\u5168\u90e8\u4f18\u60e0"},{title:"\u9650\u65f6\u7279\u60e0"},{title:"\u65b0\u5ba2\u4e13\u4eab"}],m=e=>{switch(e){case 1:return r.filter(e=>e.discount&&parseFloat(e.discount)<8);case 2:return r.filter(e=>e.title.includes("\u65b0\u5ba2"));default:return r}},u=s=>e.jsxRuntimeExports.jsxs(e.View,{className:"promotion-card",children:[e.jsxRuntimeExports.jsx(e.Image,{className:"promotion-image",src:s.image,mode:"aspectFill"}),e.jsxRuntimeExports.jsxs(e.View,{className:"promotion-content",children:[e.jsxRuntimeExports.jsxs(e.View,{className:"promotion-header",children:[e.jsxRuntimeExports.jsxs(e.View,{className:"title-section",children:[e.jsxRuntimeExports.jsx(e.Text,{className:"promotion-title",children:s.title}),e.jsxRuntimeExports.jsx(e.Text,{className:"promotion-subtitle",children:s.subtitle})]}),e.jsxRuntimeExports.jsx(e.View,{className:"discount-badge",children:e.jsxRuntimeExports.jsx(e.Text,{className:"discount-text",children:s.discount})})]}),e.jsxRuntimeExports.jsxs(e.View,{className:"price-section",children:[e.jsxRuntimeExports.jsxs(e.View,{className:"prices",children:[e.jsxRuntimeExports.jsxs(e.Text,{className:"discount-price",children:["\xa5",s.discountPrice]}),e.jsxRuntimeExports.jsxs(e.Text,{className:"original-price",children:["\xa5",s.originalPrice]})]}),e.jsxRuntimeExports.jsxs(e.View,{className:"quota-info",children:[e.jsxRuntimeExports.jsxs(e.Text,{className:"quota-text",children:["\u5269\u4f59",s.remainingQuota,"\u4efd"]}),e.jsxRuntimeExports.jsx(e.View,{className:"quota-progress",children:e.jsxRuntimeExports.jsx(e.View,{className:"quota-progress-fill",style:{width:s.remainingQuota/s.totalQuota*100+"%"}})})]})]}),e.jsxRuntimeExports.jsx(e.View,{className:"description-section",children:s.description.map((t,s)=>e.jsxRuntimeExports.jsxs(e.Text,{className:"description-item",children:["\u2022 ",t]},s))}),e.jsxRuntimeExports.jsxs(e.View,{className:"promotion-footer",children:[e.jsxRuntimeExports.jsxs(e.Text,{className:"valid-date",children:["\u6709\u6548\u671f\u81f3 ",s.validUntil]}),e.jsxRuntimeExports.jsx(t.AtButton,{type:"primary",size:"small",className:"purchase-btn",onClick:()=>l(s),children:"\u7acb\u5373\u62a2\u8d2d"})]})]})]},s.id);return e.jsxRuntimeExports.jsxs(e.View,{className:"promotion-page",children:[e.jsxRuntimeExports.jsxs(e.View,{className:"page-header",children:[e.jsxRuntimeExports.jsx(e.Text,{className:"page-title",children:"\u4f18\u60e0\u4e13\u533a"}),e.jsxRuntimeExports.jsx(e.Text,{className:"page-subtitle",children:"\u9650\u65f6\u7279\u60e0\uff0c\u624b\u6162\u65e0"})]}),e.jsxRuntimeExports.jsx(t.AtTabs,{current:s,tabList:x,onClick:i,className:"promotion-tabs",children:x.map((i,o)=>e.jsxRuntimeExports.jsx(t.AtTabsPane,{current:s,index:o,children:e.jsxRuntimeExports.jsx(e.ScrollView,{scrollY:!0,className:"promotion-list",children:a?e.jsxRuntimeExports.jsx(e.View,{className:"loading-container",children:e.jsxRuntimeExports.jsx(e.Text,{className:"loading-text",children:"\u52a0\u8f7d\u4e2d..."})}):m(o).map(e=>u(e))})},o))})]})};var n={navigationBarTitleText:"\u4f18\u60e0\u4e13\u533a",navigationBarBackgroundColor:"#d4237a",navigationBarTextStyle:"white"};Page(e.createPageConfig(r,"pages/promotion/index",{root:{cn:[]}},n||{}));
