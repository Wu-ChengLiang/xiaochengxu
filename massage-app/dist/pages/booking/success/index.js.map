{"version":3,"file":"index.js","sources":["../../../../src/pages/booking/success/index.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { View, Text, Image } from '@tarojs/components'\nimport Taro, { useRouter } from '@tarojs/taro'\nimport { AtIcon } from 'taro-ui'\nimport { orderService, OrderData } from '@/services/order'\nimport './index.scss'\n\nconst BookingSuccessPage: React.FC = () => {\n  const router = useRouter()\n  const { orderNo } = router.params as { orderNo: string }\n  const [orderInfo, setOrderInfo] = useState<OrderData | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    fetchOrderDetail()\n  }, [orderNo])\n\n  const fetchOrderDetail = async () => {\n    if (!orderNo) {\n      Taro.showToast({\n        title: '订单号缺失',\n        icon: 'none'\n      })\n      setTimeout(() => {\n        Taro.reLaunch({ url: '/pages/appointment/index' })\n      }, 1500)\n      return\n    }\n\n    try {\n      const order = await orderService.getOrderDetail(orderNo)\n      setOrderInfo(order)\n      setLoading(false)\n    } catch (error) {\n      setLoading(false)\n      Taro.showToast({\n        title: '获取订单失败',\n        icon: 'none'\n      })\n    }\n  }\n\n  const handleViewOrders = () => {\n    Taro.redirectTo({\n      url: '/pages/order/list/index'\n    })\n  }\n\n  const handleBackHome = () => {\n    Taro.switchTab({\n      url: '/pages/appointment/index'\n    })\n  }\n\n  const generateQRCodeUrl = (orderNo: string) => {\n    // Mock 生成二维码 URL\n    return `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${orderNo}`\n  }\n\n  if (loading) {\n    return (\n      <View className=\"success-page\">\n        <View className=\"loading\">加载中...</View>\n      </View>\n    )\n  }\n\n  return (\n    <View className=\"success-page\">\n      {/* 成功提示 */}\n      <View className=\"success-header\">\n        <View className=\"success-icon-wrapper\">\n          <AtIcon value=\"check-circle\" size=\"60\" color=\"#52c41a\" />\n        </View>\n        <Text className=\"success-title\">支付成功</Text>\n        <Text className=\"success-subtitle\">您已成功预约，请准时到店</Text>\n      </View>\n\n      {/* 订单信息 */}\n      {orderInfo && (\n        <View className=\"order-info\">\n          <View className=\"info-card\">\n            <View className=\"info-row\">\n              <Text className=\"label\">门店</Text>\n              <Text className=\"value\">{orderInfo.storeName}</Text>\n            </View>\n            <View className=\"info-row\">\n              <Text className=\"label\">推拿师</Text>\n              <Text className=\"value\">{orderInfo.therapistName}</Text>\n            </View>\n            <View className=\"info-row\">\n              <Text className=\"label\">服务项目</Text>\n              <Text className=\"value\">{orderInfo.serviceName}</Text>\n            </View>\n            <View className=\"info-row\">\n              <Text className=\"label\">预约时间</Text>\n              <Text className=\"value\">\n                {orderInfo.appointmentDate} {orderInfo.appointmentTime}\n              </Text>\n            </View>\n            <View className=\"info-row\">\n              <Text className=\"label\">订单金额</Text>\n              <Text className=\"value price\">¥{orderInfo.totalAmount}</Text>\n            </View>\n          </View>\n\n          {/* 核销二维码 */}\n          <View className=\"qrcode-section\">\n            <Text className=\"qrcode-title\">到店核销码</Text>\n            <Image \n              className=\"qrcode-image\" \n              src={generateQRCodeUrl(orderInfo.orderNo)}\n              mode=\"aspectFit\"\n            />\n            <Text className=\"qrcode-no\">{orderInfo.orderNo}</Text>\n            <Text className=\"qrcode-tip\">请向门店工作人员出示此二维码</Text>\n          </View>\n        </View>\n      )}\n\n      {/* 操作按钮 */}\n      <View className=\"action-buttons\">\n        <View className=\"button-group\">\n          <View className=\"button secondary\" onClick={handleBackHome}>\n            返回首页\n          </View>\n          <View className=\"button primary\" onClick={handleViewOrders}>\n            查看订单\n          </View>\n        </View>\n      </View>\n\n      {/* 温馨提示 */}\n      <View className=\"tips\">\n        <Text className=\"tips-title\">温馨提示</Text>\n        <View className=\"tips-list\">\n          <Text className=\"tips-item\">• 请在预约时间前10分钟到店</Text>\n          <Text className=\"tips-item\">• 如需取消订单，请在服务开始前6小时操作</Text>\n          <Text className=\"tips-item\">• 到店后请向前台出示核销二维码</Text>\n        </View>\n      </View>\n    </View>\n  )\n}\n\nexport default BookingSuccessPage"],"names":["BookingSuccessPage","router","useRouter","orderNo","params","orderInfo","setOrderInfo","useState","loading","setLoading","useEffect","fetchOrderDetail","Taro","showToast","title","icon","setTimeout","reLaunch","url","order","orderService","getOrderDetail","error","handleViewOrders","redirectTo","handleBackHome","switchTab","generateQRCodeUrl","jsx","View","jsxs","AtIcon","Text","storeName","therapistName","serviceName","appointmentDate","appointmentTime","totalAmount","Image"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAOA,MAAMA,qBAA+BA,MAAM;AACzC,QAAMC,SAASC,KAAAA,YAAAA;AACT,QAAA,EAAEC,QAAQ,IAAIF,OAAOG;AAC3B,QAAM,CAACC,WAAWC,YAAY,IAAIC,cAA2B,IAAI;AACjE,QAAM,CAACC,SAASC,UAAU,IAAIF,cAAS,IAAI;AAE3CG,OAAAA,UAAU,MAAM;AACG;EAAA,GAChB,CAACP,OAAO,CAAC;AAEZ,QAAMQ,mBAAmB,MAAY;AACnC,QAAI,CAACR,SAAS;AACZS,WAAAA,KAAKC,UAAU;AAAA,QACbC,OAAO;AAAA,QACPC,MAAM;AAAA,MAAA,CACP;AACDC,iBAAW,MAAM;AACfJ,aAAAA,KAAKK,SAAS,EAAEC,KAAK,2BAA4B,CAAA;AAAA,SAChD,IAAI;AACP;AAAA,IACF;AAEI,QAAA;AACF,YAAMC,QAAQ,MAAMC,OAAAA,aAAaC,eAAelB,OAAO;AACvDG,mBAAaa,KAAK;AAClBV,iBAAW,KAAK;AAAA,aACTa,OAAO;AACdb,iBAAW,KAAK;AAChBG,WAAAA,KAAKC,UAAU;AAAA,QACbC,OAAO;AAAA,QACPC,MAAM;AAAA,MAAA,CACP;AAAA,IACH;AAAA,EAAA;AAGF,QAAMQ,mBAAmBA,MAAM;AAC7BX,SAAAA,KAAKY,WAAW;AAAA,MACdN,KAAK;AAAA,IAAA,CACN;AAAA,EAAA;AAGH,QAAMO,iBAAiBA,MAAM;AAC3Bb,SAAAA,KAAKc,UAAU;AAAA,MACbR,KAAK;AAAA,IAAA,CACN;AAAA,EAAA;AAGGS,QAAAA,oBAAoBA,CAACxB,aAAoB;AAE7C,WAAO,iEAAiEA,QAAO;AAAA,EAAA;AAGjF,MAAIK,SAAS;AAET,WAAAoB,qBAAAA,IAACC,KAAAA,QAAK,WAAU,gBACd,mCAACA,KAAK,MAAA,EAAA,WAAU,WAAU,UAAA,SAAM,CAAA,EAClC,CAAA;AAAA,EAEJ;AAGE,SAAAC,qBAAA,KAACD,KAAK,MAAA,EAAA,WAAU,gBAEd,UAAA;AAAA,IAACC,qBAAAA,KAAAD,KAAAA,MAAA,EAAK,WAAU,kBACd,UAAA;AAAA,MAACD,qBAAA,IAAAC,KAAA,MAAA,EAAK,WAAU,wBACd,UAACD,qBAAAA,IAAAG,QAAA,QAAA,EAAO,OAAM,gBAAe,MAAK,MAAK,OAAM,UAAS,CAAA,GACxD;AAAA,MACCH,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,iBAAgB,UAAI,QAAA;AAAA,MACnCJ,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,oBAAmB,UAAY,gBAAA;AAAA,IAAA,GACjD;AAAA,IAGC3B,aACCyB,qBAAA,KAACD,KAAK,MAAA,EAAA,WAAU,cACd,UAAA;AAAA,MAACC,qBAAAA,KAAAD,KAAAA,MAAA,EAAK,WAAU,aACd,UAAA;AAAA,QAACC,qBAAAA,KAAAD,KAAAA,MAAA,EAAK,WAAU,YACd,UAAA;AAAA,UAACD,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,SAAQ,UAAE,MAAA;AAAA,UACzBJ,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,SAAS3B,oBAAU4B,WAAU;AAAA,QAAA,GAC/C;AAAA,QACAH,qBAAAA,KAACD,KAAAA,MAAK,EAAA,WAAU,YACd,UAAA;AAAA,UAACD,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,SAAQ,UAAG,OAAA;AAAA,UAC1BJ,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,SAAS3B,oBAAU6B,eAAc;AAAA,QAAA,GACnD;AAAA,QACAJ,qBAAAA,KAACD,KAAAA,MAAK,EAAA,WAAU,YACd,UAAA;AAAA,UAACD,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,SAAQ,UAAI,QAAA;AAAA,UAC3BJ,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,SAAS3B,oBAAU8B,aAAY;AAAA,QAAA,GACjD;AAAA,QACAL,qBAAAA,KAACD,KAAAA,MAAK,EAAA,WAAU,YACd,UAAA;AAAA,UAACD,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,SAAQ,UAAI,QAAA;AAAA,UAC5BF,qBAAAA,KAACE,KAAAA,MAAK,EAAA,WAAU,SACb3B,UAAAA;AAAAA,YAAU+B,UAAAA;AAAAA,YAAgB;AAAA,YAAE/B,UAAUgC;AAAAA,UAAAA,GACzC;AAAA,QAAA,GACF;AAAA,QACAP,qBAAAA,KAACD,KAAAA,MAAK,EAAA,WAAU,YACd,UAAA;AAAA,UAACD,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,SAAQ,UAAI,QAAA;AAAA,UAC5BF,qBAAAA,KAACE,KAAAA,MAAK,EAAA,WAAU,eAAc,UAAA;AAAA,YAAA;AAAA,YAAE3B,UAAUiC;AAAAA,UAAAA,GAAY;AAAA,QAAA,GACxD;AAAA,MAAA,GACF;AAAA,MAGAR,qBAAAA,KAACD,KAAAA,MAAK,EAAA,WAAU,kBACd,UAAA;AAAA,QAACD,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,gBAAe,UAAK,SAAA;AAAA,QACpCJ,qBAAA;AAAA,UAACW,KAAA;AAAA,UAAA;AAAA,YACC,WAAU;AAAA,YACV,KAAKZ,kBAAkBtB,UAAUF,OAAO;AAAA,YACxC,MAAK;AAAA,UAAA;AAAA,QAAW;AAAA,QAEjByB,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,aAAa3B,oBAAUF,SAAQ;AAAA,QAC9CyB,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,cAAa,UAAc,kBAAA;AAAA,MAAA,GAC7C;AAAA,IAAA,GACF;AAAA,6BAIDH,KAAK,MAAA,EAAA,WAAU,kBACd,UAACC,qBAAA,KAAAD,WAAA,EAAK,WAAU,gBACd,UAAA;AAAA,MAAAD,yBAACC,KAAAA,MAAK,EAAA,WAAU,oBAAmB,SAASJ,gBAAe,UAE3D,QAAA;AAAA,+BACCI,KAAAA,MAAK,EAAA,WAAU,kBAAiB,SAASN,kBAAiB,UAE3D,QAAA;AAAA,IAAA,EAAA,CACF,EACF,CAAA;AAAA,IAGAO,qBAAAA,KAACD,KAAAA,MAAK,EAAA,WAAU,QACd,UAAA;AAAA,MAACD,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,cAAa,UAAI,QAAA;AAAA,MACjCF,qBAAAA,KAACD,KAAAA,MAAK,EAAA,WAAU,aACd,UAAA;AAAA,QAACD,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,aAAY,UAAe,mBAAA;AAAA,QAC1CJ,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,aAAY,UAAqB,yBAAA;AAAA,QAChDJ,qBAAA,IAAAI,KAAA,MAAA,EAAK,WAAU,aAAY,UAAgB,oBAAA;AAAA,MAAA,GAC9C;AAAA,IAAA,GACF;AAAA,EACF,EAAA,CAAA;AAEJ;;;;;;;;"}