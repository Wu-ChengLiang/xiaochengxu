var s=(s,e,a)=>new Promise((c,l)=>{var r=s=>{try{n(a.next(s))}catch(e){l(e)}},i=s=>{try{n(a.throw(s))}catch(e){l(e)}},n=s=>s.done?c(s.value):Promise.resolve(s.value).then(r,i);n((a=a.apply(s,e)).next())});import{w as e,a,q as c,j as l,V as r,A as i,T as n,I as t}from"./vendors.b1a33877.js";import{o}from"./common.d37aa707.js";const d=()=>{const d=e.useRouter(),{orderNo:m}=d.params,[h,x]=a.useState(null),[N,j]=a.useState(!0);a.useEffect(()=>{u()},[m]);const u=()=>s(void 0,null,function*(){if(!m)return c({title:"\u8ba2\u5355\u53f7\u7f3a\u5931",icon:"none"}),void setTimeout(()=>{e.reLaunch({url:"/pages/appointment/index"})},1500);try{const s=yield o.getOrderDetail(m);x(s),j(!1)}catch(s){j(!1),c({title:"\u83b7\u53d6\u8ba2\u5355\u5931\u8d25",icon:"none"})}}),p=()=>{e.redirectTo({url:"/pages/order/list/index"})},v=()=>{e.switchTab({url:"/pages/appointment/index"})},f=s=>`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${s}`;return N?l.jsx(r,{className:"success-page",children:l.jsx(r,{className:"loading",children:"\u52a0\u8f7d\u4e2d..."})}):l.jsxs(r,{className:"success-page",children:[l.jsxs(r,{className:"success-header",children:[l.jsx(r,{className:"success-icon-wrapper",children:l.jsx(i,{value:"check-circle",size:"60",color:"#52c41a"})}),l.jsx(n,{className:"success-title",children:"\u652f\u4ed8\u6210\u529f"}),l.jsx(n,{className:"success-subtitle",children:"\u60a8\u5df2\u6210\u529f\u9884\u7ea6\uff0c\u8bf7\u51c6\u65f6\u5230\u5e97"})]}),h&&l.jsxs(r,{className:"order-info",children:[l.jsxs(r,{className:"info-card",children:[l.jsxs(r,{className:"info-row",children:[l.jsx(n,{className:"label",children:"\u95e8\u5e97"}),l.jsx(n,{className:"value",children:h.storeName})]}),l.jsxs(r,{className:"info-row",children:[l.jsx(n,{className:"label",children:"\u63a8\u62ff\u5e08"}),l.jsx(n,{className:"value",children:h.therapistName})]}),l.jsxs(r,{className:"info-row",children:[l.jsx(n,{className:"label",children:"\u670d\u52a1\u9879\u76ee"}),l.jsx(n,{className:"value",children:h.serviceName})]}),l.jsxs(r,{className:"info-row",children:[l.jsx(n,{className:"label",children:"\u9884\u7ea6\u65f6\u95f4"}),l.jsxs(n,{className:"value",children:[h.appointmentDate," ",h.appointmentTime]})]}),l.jsxs(r,{className:"info-row",children:[l.jsx(n,{className:"label",children:"\u8ba2\u5355\u91d1\u989d"}),l.jsxs(n,{className:"value price",children:["\xa5",h.totalAmount]})]})]}),l.jsxs(r,{className:"qrcode-section",children:[l.jsx(n,{className:"qrcode-title",children:"\u5230\u5e97\u6838\u9500\u7801"}),l.jsx(t,{className:"qrcode-image",src:f(h.orderNo),mode:"aspectFit"}),l.jsx(n,{className:"qrcode-no",children:h.orderNo}),l.jsx(n,{className:"qrcode-tip",children:"\u8bf7\u5411\u95e8\u5e97\u5de5\u4f5c\u4eba\u5458\u51fa\u793a\u6b64\u4e8c\u7ef4\u7801"})]})]}),l.jsx(r,{className:"action-buttons",children:l.jsxs(r,{className:"button-group",children:[l.jsx(r,{className:"button secondary",onClick:v,children:"\u8fd4\u56de\u9996\u9875"}),l.jsx(r,{className:"button primary",onClick:p,children:"\u67e5\u770b\u8ba2\u5355"})]})}),l.jsxs(r,{className:"tips",children:[l.jsx(n,{className:"tips-title",children:"\u6e29\u99a8\u63d0\u793a"}),l.jsxs(r,{className:"tips-list",children:[l.jsx(n,{className:"tips-item",children:"\u2022 \u8bf7\u5728\u9884\u7ea6\u65f6\u95f4\u524d10\u5206\u949f\u5230\u5e97"}),l.jsx(n,{className:"tips-item",children:"\u2022 \u5982\u9700\u53d6\u6d88\u8ba2\u5355\uff0c\u8bf7\u5728\u670d\u52a1\u5f00\u59cb\u524d6\u5c0f\u65f6\u64cd\u4f5c"}),l.jsx(n,{className:"tips-item",children:"\u2022 \u5230\u5e97\u540e\u8bf7\u5411\u524d\u53f0\u51fa\u793a\u6838\u9500\u4e8c\u7ef4\u7801"})]})]})]})};export{d as default};
